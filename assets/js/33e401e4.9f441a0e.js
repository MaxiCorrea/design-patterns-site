"use strict";(globalThis.webpackChunkdesign_patterns_site=globalThis.webpackChunkdesign_patterns_site||[]).push([[8340],{6622(e,n,i){i.r(n),i.d(n,{assets:()=>l,contentTitle:()=>a,default:()=>p,frontMatter:()=>t,metadata:()=>s,toc:()=>d});const s=JSON.parse('{"id":"patterns/composite","title":"Composite","description":"Composite modela una estructura jer\xe1rquica donde un objeto individual y un conjunto de objetos del mismo tipo se tratan de forma uniforme, encapsulando el recorrido y la operaci\xf3n dentro del propio modelo.","source":"@site/docs/patterns/composite.md","sourceDirName":"patterns","slug":"/patterns/composite","permalink":"/design-patterns-site/docs/patterns/composite","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":11,"frontMatter":{"title":"Composite","sidebar_position":11},"sidebar":"tutorialSidebar","previous":{"title":"Facade","permalink":"/design-patterns-site/docs/patterns/facade"},"next":{"title":"Bridge","permalink":"/design-patterns-site/docs/patterns/bridge"}}');var r=i(4848),o=i(8453);const t={title:"Composite",sidebar_position:11},a=void 0,l={},d=[{value:"\xbfSe usa hoy en arquitectura hexagonal?",id:"se-usa-hoy-en-arquitectura-hexagonal",level:2},{value:"C\xf3mo se implementa hoy (vs GoF)",id:"c\xf3mo-se-implementa-hoy-vs-gof",level:2},{value:"Reemplazo (si existe)",id:"reemplazo-si-existe",level:2},{value:"Ejemplo",id:"ejemplo",level:2},{value:"Regla de oro",id:"regla-de-oro",level:2},{value:"Frase final",id:"frase-final",level:2},{value:"Ver video",id:"ver-video",level:2}];function c(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",img:"img",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,o.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Composite"})," modela una estructura jer\xe1rquica donde un objeto individual y un conjunto de objetos del mismo tipo se tratan de forma uniforme, encapsulando el recorrido y la operaci\xf3n dentro del propio modelo."]}),"\n",(0,r.jsx)(n.p,{children:"\ud83d\udc49 No es \u201cuna lista de cosas\u201d,"}),"\n",(0,r.jsx)(n.p,{children:"\ud83d\udc49 es una unidad de negocio que puede estar compuesta por otras unidades iguales."}),"\n",(0,r.jsx)(n.h2,{id:"se-usa-hoy-en-arquitectura-hexagonal",children:"\xbfSe usa hoy en arquitectura hexagonal?"}),"\n",(0,r.jsx)(n.p,{children:"S\xed, se usa"}),"\n",(0,r.jsx)(n.p,{children:"pero solo cuando la composici\xf3n es parte del dominio."}),"\n",(0,r.jsx)(n.p,{children:"\u274c No se usa para:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Agrupar DTOs"}),"\n",(0,r.jsx)(n.li,{children:"Agrupar adapters"}),"\n",(0,r.jsx)(n.li,{children:"Orquestar pasos de un caso de uso"}),"\n",(0,r.jsx)(n.li,{children:"Reemplazar un for"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"\u2705 S\xed se usa cuando:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Hay jerarqu\xedas reales del dominio"}),"\n",(0,r.jsx)(n.li,{children:"Las reglas se aplican igual a un elemento y a un grupo"}),"\n",(0,r.jsx)(n.li,{children:"La estructura tiene invariantes propias"}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"c\xf3mo-se-implementa-hoy-vs-gof",children:"C\xf3mo se implementa hoy (vs GoF)"}),"\n",(0,r.jsx)(n.p,{children:"GoF cl\xe1sico"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Interface com\xfan"}),"\n",(0,r.jsx)(n.li,{children:"Leaf y Composite"}),"\n",(0,r.jsx)(n.li,{children:"M\xe9todos como add/remove p\xfablicos"}),"\n",(0,r.jsx)(n.li,{children:"Mucho polimorfismo estructural"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"Implementaci\xf3n moderna"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"El Composite es un Aggregate Root"}),"\n",(0,r.jsx)(n.li,{children:"Las operaciones expuestas son de negocio, no estructurales"}),"\n",(0,r.jsx)(n.li,{children:"La recursividad est\xe1 encapsulada"}),"\n",(0,r.jsx)(n.li,{children:"No se expone la colecci\xf3n interna"}),"\n",(0,r.jsx)(n.li,{children:"Se respeta invariantes del dominio"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"\ud83d\udc49 El foco no es el patr\xf3n, es el modelo"}),"\n",(0,r.jsx)(n.h1,{id:"anti-ejemplo-t\xedpico-",children:"Anti-ejemplo t\xedpico \ud83d\udeab"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"class Order {\n    List<Order> children;\n}\n"})}),"\n",(0,r.jsx)(n.p,{children:"Usar Composite para:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Evitar un stream().map().reduce()"}),"\n",(0,r.jsx)(n.li,{children:"Modelar workflows"}),"\n",(0,r.jsx)(n.li,{children:"Validaciones t\xe9cnicas"}),"\n",(0,r.jsx)(n.li,{children:"Agrupar cosas \u201cporque s\xed\u201d"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"\ud83d\udc49 Si no hay una regla de negocio recursiva, NO es Composite."}),"\n",(0,r.jsx)(n.h2,{id:"reemplazo-si-existe",children:"Reemplazo (si existe)"}),"\n",(0,r.jsx)(n.p,{children:"Depende del problema real:"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Problema"}),(0,r.jsx)(n.th,{children:"Mejor alternativa"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Solo sumar / recorrer"}),(0,r.jsx)(n.td,{children:"Stream / Reduce"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Flujo de pasos"}),(0,r.jsx)(n.td,{children:"Chain of Responsibility"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Reglas intercambiables"}),(0,r.jsx)(n.td,{children:"Strategy"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Orquestaci\xf3n"}),(0,r.jsx)(n.td,{children:"Application Service"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Validaciones simples"}),(0,r.jsx)(n.td,{children:"Specification"})]})]})]}),"\n",(0,r.jsx)(n.p,{children:"\ud83d\udc49 Composite no compite, representa."}),"\n",(0,r.jsx)(n.h2,{id:"ejemplo",children:"Ejemplo"}),"\n",(0,r.jsxs)(n.p,{children:["\ud83d\udc49 Ver implementaci\xf3n completa en GitHub: ",(0,r.jsx)(n.a,{href:"https://github.com/MaxiCorrea/java-composite",children:"https://github.com/MaxiCorrea/java-composite"})]}),"\n",(0,r.jsx)(n.h2,{id:"regla-de-oro",children:"Regla de oro"}),"\n",(0,r.jsxs)(n.p,{children:["Si el cliente no deber\xeda saber si est\xe1 hablando con uno o con muchos, y esa abstracci\xf3n tiene valor de negocio, est\xe1s frente a un ",(0,r.jsx)(n.strong,{children:"Composite"}),"."]}),"\n",(0,r.jsx)(n.p,{children:"Si solo simplifica c\xf3digo \u2192 \u274c"}),"\n",(0,r.jsx)(n.p,{children:"Si protege el modelo \u2192 \u2705"}),"\n",(0,r.jsx)(n.h2,{id:"frase-final",children:"Frase final"}),"\n",(0,r.jsx)(n.p,{children:"Composite no es un patr\xf3n para recorrer estructuras; es un patr\xf3n para proteger decisiones del dominio frente a su complejidad interna."}),"\n",(0,r.jsx)(n.h2,{id:"ver-video",children:"Ver video"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.a,{href:"https://www.youtube.com/watch?v=cIQqAgyrRGg",children:(0,r.jsx)(n.img,{src:"https://img.youtube.com/vi/cIQqAgyrRGg/0.jpg",alt:"Composite en Java"})})})]})}function p(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(c,{...e})}):c(e)}},8453(e,n,i){i.d(n,{R:()=>t,x:()=>a});var s=i(6540);const r={},o=s.createContext(r);function t(e){const n=s.useContext(o);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:t(e.components),s.createElement(o.Provider,{value:n},e.children)}}}]);