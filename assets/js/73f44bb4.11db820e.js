"use strict";(globalThis.webpackChunkdesign_patterns_site=globalThis.webpackChunkdesign_patterns_site||[]).push([[7351],{1708(e,n,i){i.r(n),i.d(n,{assets:()=>t,contentTitle:()=>a,default:()=>p,frontMatter:()=>l,metadata:()=>s,toc:()=>c});const s=JSON.parse('{"id":"patterns/observer","title":"Observer","description":"Observer es un patr\xf3n para modelar reacciones a hechos, permitiendo que m\xfaltiples comportamientos respondan a un cambio sin acoplar al productor con los consumidores.","source":"@site/docs/patterns/observer.md","sourceDirName":"patterns","slug":"/patterns/observer","permalink":"/design-patterns-site/docs/patterns/observer","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":14,"frontMatter":{"title":"Observer","sidebar_position":14},"sidebar":"tutorialSidebar","previous":{"title":"Template Method","permalink":"/design-patterns-site/docs/patterns/template-method"},"next":{"title":"Chan Of Responsivility","permalink":"/design-patterns-site/docs/patterns/chain-of-responsibility"}}');var r=i(4848),o=i(8453);const l={title:"Observer",sidebar_position:14},a=void 0,t={},c=[{value:"\xbfSe usa hoy en arquitectura hexagonal?",id:"se-usa-hoy-en-arquitectura-hexagonal",level:2},{value:"C\xf3mo se implementa hoy (vs GoF)",id:"c\xf3mo-se-implementa-hoy-vs-gof",level:2},{value:"Anti-ejemplo t\xedpico",id:"anti-ejemplo-t\xedpico",level:2},{value:"Reemplazo",id:"reemplazo",level:2},{value:"Ejemplo",id:"ejemplo",level:2},{value:"Regla de oro",id:"regla-de-oro",level:2},{value:"Frase final",id:"frase-final",level:2},{value:"Ver video",id:"ver-video",level:2}];function d(e){const n={a:"a",h2:"h2",img:"img",li:"li",p:"p",strong:"strong",ul:"ul",...(0,o.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Observer"})," es un patr\xf3n para modelar reacciones a hechos, permitiendo que m\xfaltiples comportamientos respondan a un cambio sin acoplar al productor con los consumidores."]}),"\n",(0,r.jsx)(n.p,{children:"\ud83d\udc49 No es \u201cnotificar objetos\u201d,"}),"\n",(0,r.jsx)(n.p,{children:"\ud83d\udc49 es propagar cambios de estado del dominio sin violar el dise\xf1o."}),"\n",(0,r.jsx)(n.h2,{id:"se-usa-hoy-en-arquitectura-hexagonal",children:"\xbfSe usa hoy en arquitectura hexagonal?"}),"\n",(0,r.jsx)(n.p,{children:"S\xed, pero no como en GoF."}),"\n",(0,r.jsx)(n.p,{children:"En hexagonal:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Se usa como Domain Events + Listeners"}),"\n",(0,r.jsx)(n.li,{children:"Vive principalmente en Domain / Application"}),"\n",(0,r.jsx)(n.li,{children:"Infrastructure solo consume los eventos"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"\u26a0\ufe0f Si tu Observer depende de Spring, Kafka o Mail \u2192 est\xe1 mal ubicado."}),"\n",(0,r.jsx)(n.h2,{id:"c\xf3mo-se-implementa-hoy-vs-gof",children:"C\xf3mo se implementa hoy (vs GoF)"}),"\n",(0,r.jsx)(n.p,{children:"GoF cl\xe1sico"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Observable"}),"\n",(0,r.jsx)(n.li,{children:"Observer"}),"\n",(0,r.jsx)(n.li,{children:"addObserver()"}),"\n",(0,r.jsx)(n.li,{children:"notifyObservers()"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"Hoy"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"DomainEvent"}),"\n",(0,r.jsx)(n.li,{children:"EventPublisher"}),"\n",(0,r.jsx)(n.li,{children:"EventListener"}),"\n",(0,r.jsx)(n.li,{children:"Registro expl\xedcito en el wiring"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"\ud83d\udc49 M\xe1s expl\xedcito"}),"\n",(0,r.jsx)(n.p,{children:"\ud83d\udc49 M\xe1s testeable"}),"\n",(0,r.jsx)(n.p,{children:"\ud83d\udc49 Sin herencia forzada"}),"\n",(0,r.jsx)(n.p,{children:"\ud83d\udc49 Sin magia"}),"\n",(0,r.jsx)(n.h2,{id:"anti-ejemplo-t\xedpico",children:"Anti-ejemplo t\xedpico"}),"\n",(0,r.jsx)(n.p,{children:"\u201cCuando se aprueba algo, llamo directamente a emailService, auditService y metricsService\u201d"}),"\n",(0,r.jsx)(n.p,{children:"Por qu\xe9 est\xe1 mal:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Alto acoplamiento"}),"\n",(0,r.jsx)(n.li,{children:"Violaci\xf3n SRP"}),"\n",(0,r.jsx)(n.li,{children:"Dominio dependiente de infraestructura"}),"\n",(0,r.jsx)(n.li,{children:"Cambios triviales rompen todo"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"Otro cl\xe1sico:"}),"\n",(0,r.jsx)(n.p,{children:"Usar ApplicationEventPublisher dentro del dominio"}),"\n",(0,r.jsx)(n.h2,{id:"reemplazo",children:"Reemplazo"}),"\n",(0,r.jsx)(n.p,{children:"No se reemplaza, se refina."}),"\n",(0,r.jsx)(n.p,{children:"Seg\xfan el contexto:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Domain Events \u2192 mismo concepto, mejor nombre"}),"\n",(0,r.jsx)(n.li,{children:"EventBus \u2192 Observer a escala"}),"\n",(0,r.jsx)(n.li,{children:"Messaging (Kafka/Rabbit) \u2192 Observer distribuido"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"\u26a0\ufe0f No reemplaces Observer con:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"if/else"}),"\n",(0,r.jsx)(n.li,{children:"switch"}),"\n",(0,r.jsx)(n.li,{children:"@TransactionalEventListener en el dominio"}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"ejemplo",children:"Ejemplo"}),"\n",(0,r.jsx)(n.p,{children:"Evento: AuthorizationApproved"}),"\n",(0,r.jsx)(n.p,{children:"Observers:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Notificaci\xf3n al paciente"}),"\n",(0,r.jsx)(n.li,{children:"Auditor\xeda"}),"\n",(0,r.jsx)(n.li,{children:"M\xe9tricas"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"El dominio:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Publica el evento"}),"\n",(0,r.jsx)(n.li,{children:"No sabe qui\xe9n escucha"}),"\n",(0,r.jsx)(n.li,{children:"No le importa c\xf3mo reaccionan"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"\ud83d\udc49 Eso es Observer bien aplicado."}),"\n",(0,r.jsxs)(n.p,{children:["\ud83d\udc49 Ver implementaci\xf3n completa en GitHub: ",(0,r.jsx)(n.a,{href:"https://github.com/MaxiCorrea/java-observer",children:"https://github.com/MaxiCorrea/java-observer"})]}),"\n",(0,r.jsx)(n.h2,{id:"regla-de-oro",children:"Regla de oro"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"El que produce el evento no debe conocer jam\xe1s a los que reaccionan."})}),"\n",(0,r.jsx)(n.p,{children:"Si los conoce:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"No es Observer"}),"\n",(0,r.jsx)(n.li,{children:"Es acoplamiento disfrazado"}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"frase-final",children:"Frase final"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Observer no es un patr\xf3n de notificaci\xf3n, es un patr\xf3n de desacacople."})}),"\n",(0,r.jsx)(n.p,{children:"Si lo us\xe1s para \u201cavisar cosas\u201d, sos JR."}),"\n",(0,r.jsx)(n.p,{children:"Usalo para proteger el dominio."}),"\n",(0,r.jsx)(n.h2,{id:"ver-video",children:"Ver video"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.a,{href:"https://www.youtube.com/watch?v=ouskqjes6f4",children:(0,r.jsx)(n.img,{src:"https://img.youtube.com/vi/ouskqjes6f4/0.jpg",alt:"Observer in Java"})})})]})}function p(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}},8453(e,n,i){i.d(n,{R:()=>l,x:()=>a});var s=i(6540);const r={},o=s.createContext(r);function l(e){const n=s.useContext(o);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:l(e.components),s.createElement(o.Provider,{value:n},e.children)}}}]);